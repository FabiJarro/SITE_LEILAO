{%extends "base.html"%}
{%block conteudo%}

<link rel="stylesheet" href="{{ url_for('static', filename='styles/style_index.css')}}">



{% if primeiro_nome %}
<h3>Bem-vindo, {{ primeiro_nome }}!</h3>
{% endif%}


<main>

    <h3>Destaques</h3>
    <section class="carrossel-container">
        <div class="carrossel">
            <div class="carrossel-slide active">
                <img src="{{ url_for('static', filename='imagens/azul.jpg') }}" alt="Slide 1">
                <div class="carrossel-texto">
                    <h2>Titulo1</h2>
                    <p>sla</p>
                    <a href="#" class="botao-carrossel">catálogo do Leilão</a>
                </div>
            </div>
            <div class="carrossel-slide">
                <img src="{{ url_for('static', filename='imagens/azulmarinho.jpeg') }}" alt="Slide 2">
                <div class="carrossel-texto">
                    <h2>Titulo2</h2>
                    <p>saiba mais</p>
                    <a href="#" class="botao-carrossel">saiba Mais</a>
                </div>
            </div>
            <div class="carrossel-slide">
                <img src="{{ url_for('static', filename='imagens/bege.jpg') }}" alt="Slide 3">
                <div class="carrossel-texto">
                    <h2>Titulo3</h2>
                    <p>colecionáveis</p>
                    <a href="#" class="botao-carrossel">ver Detalhes</a>
                </div>
            </div>

            <!-- Controles -->
            <div class="carrossel-controles">
                <span class="anterior">&#10094;</span>
                <span class="proximo">&#10095;</span>
            </div>
        </div>
    </section>



    <!-- PRODUTOS RECENTES -->
    <section class="produtos-recentes">
        <h2>Produtos mais recentes</h2>
        <div class="lista-produtos">
            {% for produto in produtos %}
            <div class="card-produto">
                <a href="{{ url_for('detalhes_produto', id_produto=produto.id_produto) }}">
                    {% if produto.imagens and produto.imagens[0] %}
                    <img src="{{ url_for('get_img', id_imagem=produto.imagens[0].id_imagem) }}"
                        alt="{{ produto.nome_produto }}">
                    {% else %}
                    <img src="{{ url_for('static', filename='imagens/capa_padrao.jpeg') }}"
                        alt="{{ produto.nome_produto }}">
                    {% endif %}

                    <div class="info-produto">
                        <h3>{{ produto.nome_produto }}</h3>
                        <p>R$ {{ produto.preco_produto }}</p>
                    </div>
                </a>
            </div>
            {% endfor %}
        </div>
    </section>

</main>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const slides = document.querySelectorAll(".carrossel-slide");
        const btnAnterior = document.querySelector(".anterior");
        const btnProximo = document.querySelector(".proximo");
        let index = 0;

        function mostrarSlide(n) {
            slides.forEach((slide, i) => {
                slide.classList.remove("active");
                slide.style.opacity = "0";
                slide.style.transition = "opacity 0.6s ease";
            });
            slides[n].classList.add("active");
            slides[n].style.opacity = "1";
        }

        function slideAnterior() {
            index = (index - 1 + slides.length) % slides.length;
            mostrarSlide(index);
        }

        function slideProximo() {
            index = (index + 1) % slides.length;
            mostrarSlide(index);
        }

        // Botões de controle
        btnAnterior.addEventListener("click", slideAnterior);
        btnProximo.addEventListener("click", slideProximo);

        // Troca automática
        setInterval(slideProximo, 5000);

        // Inicializa o primeiro slide
        mostrarSlide(index);
    });


</script>



{%endblock%}