{% extends "base.html" %}
{% block conteudo %}

<style>
    p {
        font-size: 20px;
    }
</style>

<p>{{ produto.nome_produto }}</p>
<p>{{ produto.categoria_produto }}</p>

<br>
<p>Valor inicial:</p>
<p>{{ produto.preco_produto }}</p>

<p>Tempo restante:</p>
<p>Status</p>

<p>Valor atual:</p>
<p> <!-- Aqui depois você pode exibir o último lance --> </p>

<p>O lance mínimo é de:</p>
<p>{{ produto.incremento_minimo }}</p>

<div class="container">
    <div class="content">
        <div id="login">
            <form method="post" action="{{ url_for('fazer_lance', id_produto=produto.id_produto) }}">
                <label for="valor_lance">Valor do lance:</label>
                <input id="valor_lance" name="valor_lance" type="number" required>
                <button type="submit" class="btn btn-primary btn-salvar">Fazer Lance</button>
            </form>
        </div>
    </div>
</div>

<p><b>Horário do lance (local):</b> <span id="horario-lance"></span></p>

<script>
    // Exemplo: pega o horário UTC que veio do servidor (ajuste conforme seu backend)
    const horarioServidor = "{{ datetime.utcnow().isoformat() }}Z"; // Flask renderiza isso

    // Converte para o horário local do navegador
    const dataLocal = new Date(horarioServidor);
    if (!isNaN(dataLocal)) {
        document.getElementById("horario-lance").textContent = dataLocal.toLocaleString();
    } else {
        document.getElementById("horario-lance").textContent = "Erro ao converter horário";
    }
</script>

{% endblock %}
